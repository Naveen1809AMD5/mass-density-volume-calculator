<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mass ⇄ Density ⇄ Volume Calculator</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9fb0c8;--accent:#2dd4bf}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:linear-gradient(180deg,#071028 0%, #08142a 100%); color:#e6f0f6; margin:0; padding:28px}
    .container{max-width:820px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    header h1{font-size:20px;margin:0}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    .field{display:flex;gap:8px;align-items:center}
    input[type=number]{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:15px}
    select{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    .actions{display:flex;gap:10px;align-items:center;margin-top:14px}
    button{background:var(--accent);border:none;padding:10px 12px;border-radius:10px;color:#042020;font-weight:600;cursor:pointer}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .info{margin-top:12px;color:var(--muted);font-size:14px}
    .result{margin-top:16px;padding:12px;border-radius:10px;background:rgba(45,212,191,0.06);color:var(--accent);font-weight:700}
    .warning{color:#ffb86b;background:rgba(255,184,107,0.04);padding:8px;border-radius:8px;margin-top:10px}
    footer{margin-top:18px;color:var(--muted);font-size:13px}
    @media (max-width:760px){.grid{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1" y="1" width="22" height="22" rx="6" fill="#05232a" stroke="#2dd4bf"/></svg>
      <div>
        <h1>Mass ⇄ Density ⇄ Volume — Calculator</h1>
        <div style="color:var(--muted);font-size:13px">Enter any two values, the third will be calculated. Units convert automatically.</div>
      </div>
    </header>

    <div class="card">
      <div class="grid">
        <div>
          <label for="mass">Mass</label>
          <div class="field">
            <input id="mass" type="number" step="any" placeholder="e.g. 2.5" />
            <select id="massUnit">
              <option value="kg">kg</option>
              <option value="g">g</option>
            </select>
          </div>
        </div>

        <div>
          <label for="density">Density</label>
          <div class="field">
            <input id="density" type="number" step="any" placeholder="e.g. 7.85" />
            <select id="densityUnit">
              <option value="kg/m3">kg/m³</option>
              <option value="g/cm3">g/cm³</option>
            </select>
          </div>
        </div>

        <div>
          <label for="volume">Volume</label>
          <div class="field">
            <input id="volume" type="number" step="any" placeholder="e.g. 0.003" />
            <select id="volumeUnit">
              <option value="m3">m³</option>
              <option value="cm3">cm³</option>
              <option value="L">L</option>
            </select>
          </div>
        </div>
      </div>

      <div class="actions">
        <button id="calc">Calculate</button>
        <button class="secondary" id="clear">Clear</button>
        <button class="secondary" id="swapUnits">Swap to engineering-friendly units</button>
      </div>

      <div id="message" class="info">Formula used: <strong>mass = density × volume</strong></div>
      <div id="result" class="result" style="display:none"></div>
      <div id="warn" class="warning" style="display:none"></div>
    </div>

    <footer>
      Tips: Use consistent significant figures. For solids, density is usually in g/cm³ (steel ≈ 7.85 g/cm³). For fluids, kg/m³ (water ≈ 1000 kg/m³).
    </footer>
  </div>

  <script>
    // Helper: convert any input to base units: mass -> kg, density -> kg/m3, volume -> m3
    const toBase = {
      mass(value, unit){ if (value === '' || value === null) return null; value = Number(value); if (isNaN(value)) return null; return unit==='g'? value/1000 : value; },
      density(value, unit){ if (value === '' || value === null) return null; value = Number(value); if (isNaN(value)) return null; return unit==='g/cm3' ? value*1000 : value; },
      volume(value, unit){ if (value === '' || value === null) return null; value = Number(value); if (isNaN(value)) return null; if (unit==='cm3') return value*1e-6; if (unit==='L') return value*1e-3; return value; }
    };

    // From base units back to selected unit
    const fromBase = {
      mass(value, unit){ if (value===null) return null; return unit==='g'? value*1000 : value; },
      density(value, unit){ if (value===null) return null; return unit==='g/cm3'? value/1000 : value; },
      volume(value, unit){ if (value===null) return null; if (unit==='cm3') return value/1e-6; if (unit==='L') return value/1e-3; return value; }
    };

    const massEl = document.getElementById('mass');
    const densityEl = document.getElementById('density');
    const volumeEl = document.getElementById('volume');
    const massUnit = document.getElementById('massUnit');
    const densityUnit = document.getElementById('densityUnit');
    const volumeUnit = document.getElementById('volumeUnit');
    const calcBtn = document.getElementById('calc');
    const clearBtn = document.getElementById('clear');
    const swapBtn = document.getElementById('swapUnits');
    const resultDiv = document.getElementById('result');
    const messageDiv = document.getElementById('message');
    const warnDiv = document.getElementById('warn');

    function countFilled(){
      const a = massEl.value.trim() !== '';
      const b = densityEl.value.trim() !== '';
      const c = volumeEl.value.trim() !== '';
      return [a,b,c].filter(Boolean).length;
    }

    function calculate(){
      warnDiv.style.display='none';
      resultDiv.style.display='none';
      const filled = countFilled();
      if (filled < 2){ warn('Enter any two values to calculate the third.'); return; }
      if (filled > 2){ warn('You have entered all three values. Please remove the one you want me to calculate, or click Clear.'); return; }

      // convert inputs to base units
      const mIn = massEl.value.trim();
      const dIn = densityEl.value.trim();
      const vIn = volumeEl.value.trim();
      const mBase = toBase.mass(mIn, massUnit.value);
      const dBase = toBase.density(dIn, densityUnit.value);
      const vBase = toBase.volume(vIn, volumeUnit.value);

      let computed = null;
      let computedName = '';

      // If mass and density present -> volume = mass / density
      if (mIn !== '' && dIn !== ''){
        if (dBase === 0){ warn('Density cannot be zero.'); return; }
        computed = mBase / dBase; computedName='volume';
      }
      // If mass and volume present -> density = mass / volume
      else if (mIn !== '' && vIn !== ''){
        if (vBase === 0){ warn('Volume cannot be zero.'); return; }
        computed = mBase / vBase; computedName='density';
      }
      // If density and volume present -> mass = density * volume
      else if (dIn !== '' && vIn !== ''){
        computed = dBase * vBase; computedName='mass';
      }

      if (computed === null || !isFinite(computed)){
        warn('Calculation failed — please check inputs.'); return;
      }

      // Convert computed to user's selected unit for that quantity
      let displayValue, unitLabel;
      if (computedName==='mass'){ displayValue = fromBase.mass(computed, massUnit.value); unitLabel = massUnit.options[massUnit.selectedIndex].text; }
      if (computedName==='density'){ displayValue = fromBase.density(computed, densityUnit.value); unitLabel = densityUnit.options[densityUnit.selectedIndex].text; }
      if (computedName==='volume'){ displayValue = fromBase.volume(computed, volumeUnit.value); unitLabel = volumeUnit.options[volumeUnit.selectedIndex].text; }

      // Nice formatting (avoid exponential for engineer-friendly numbers)
      const formatted = formatNumber(displayValue);
      resultDiv.innerText = `${computedName.toUpperCase()}: ${formatted} ${unitLabel}`;
      resultDiv.style.display = 'block';
    }

    function formatNumber(x){
      if (!isFinite(x)) return String(x);
      const abs = Math.abs(x);
      if (abs === 0) return '0';
      if (abs >= 0.001 && abs < 1e6){
        // show up to 6 significant digits but avoid .000000
        return Number(x.toPrecision(6)).toString();
      }
      // scientific for very large/small
      return x.toExponential(6);
    }

    function warn(text){ warnDiv.innerText = text; warnDiv.style.display='block'; }

    calcBtn.addEventListener('click', calculate);
    clearBtn.addEventListener('click', ()=>{ massEl.value=''; densityEl.value=''; volumeEl.value=''; resultDiv.style.display='none'; warnDiv.style.display='none'; });

    // Swap units to a commonly used engineering set (kg, kg/m3, m3)
    swapBtn.addEventListener('click', ()=>{
      massUnit.value='kg'; densityUnit.value='kg/m3'; volumeUnit.value='m3';
    });

    // Also calculate on Enter key when focus inside inputs
    [massEl,densityEl,volumeEl].forEach(el=>el.addEventListener('keydown', (e)=>{ if (e.key==='Enter') calculate(); }));

    // Show formula and small example when user changes units
    [massUnit,densityUnit,volumeUnit].forEach(el=>el.addEventListener('change', ()=>{
      messageDiv.innerHTML = 'Formula used: <strong>mass = density × volume</strong> — units convert automatically.';
    }));
  </script>
</body>
</html>
